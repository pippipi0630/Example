# Serviceの説明

Node.js で記載しています。

JSの特徴として、各JSファイルは require されたと同時に１回実行され、クラス定義などが行われます。

で、ファイル下部でexportされた「クラスまたはインスタンス」をrequire元で利用することができます。

exportは絶対に１回しか実行されないことがエンジンに保証されているので、

（複数回requireされても、２回め以降は無視される）

```
module.exports = new DaoFactory();
```

などと書いてインスタンスをexportすることでSingletonを実現しています。（擬似的に）


## index.js

サービスのエントリポイントです。

WEB-APIのルーティング設定をして、

サービスロジックのインスタンスを作って、リッスンを開始しています。

localhost:3000のルートにGetリクエストが来たら、distフォルダにあるクライアントファイルを返します。

## ServiceLogic

タイマで定期的に（5secごと）データをDaoから取得してきて、内部に保持する

## Dao

### ExampleDao

適当にデータを作って投げるDao

### daoFactory

Get要求でDaoインスタンスを作って返す Singleton インスタンス

JSにはC#のようなインタフェースという概念がないので、

新しいDaoを作るときは、インタフェースを揃えてね、というのが暗黙の了解となります。

もうちょっとちゃんとしたければ、クラス継承（extends）という機能はあるので、DaoBaseとかって基底クラスを作って、

必ずメソッドをオーバーライドしてね、みたいな運用でもいいかもしれません。